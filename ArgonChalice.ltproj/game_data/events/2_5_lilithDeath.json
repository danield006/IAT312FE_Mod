[
    {
        "name": "lilithDeath",
        "trigger": "unit_death",
        "level_nid": "2_5",
        "condition": "unit.nid == 'Lilith'",
        "commands": [
            [
                "if",
                [
                    "game.game_vars['_killLilith'] == True"
                ]
            ],
            [
                "music",
                [
                    "deathThroes"
                ]
            ],
            [
                "multi_add_portrait",
                [
                    "Lilith",
                    "Right",
                    "MC",
                    "Left"
                ]
            ],
            [
                "speak",
                [
                    "Lilith",
                    "You... bastard!|I'm so close to reviving...the demon king...|DIE!",
                    "",
                    "",
                    "noir"
                ]
            ],
            [
                "move_portrait",
                [
                    "Lilith",
                    "MidRight"
                ]
            ],
            [
                "sound",
                [
                    "FireBall"
                ]
            ],
            [
                "move_portrait",
                [
                    "MC",
                    "FarLeft"
                ]
            ],
            [
                "move_portrait",
                [
                    "Lilith",
                    "Right"
                ]
            ],
            [
                "move_portrait",
                [
                    "MC",
                    "Left"
                ]
            ],
            [
                "speak",
                [
                    "MC",
                    "Not today."
                ]
            ],
            [
                "move_portrait",
                [
                    "MC",
                    "FarRight"
                ]
            ],
            [
                "sound",
                [
                    "Attack Hit 3"
                ]
            ],
            [
                "move_portrait",
                [
                    "MC",
                    "Left"
                ]
            ],
            [
                "speak",
                [
                    "Lilith",
                    "How could this be...|Curse you...Uther...",
                    "",
                    "",
                    "noir"
                ]
            ],
            [
                "expression",
                [
                    "Lilith",
                    "CloseEyes"
                ]
            ],
            [
                "sound",
                [
                    "CombatDeath"
                ]
            ],
            [
                "wait",
                [
                    "100"
                ]
            ],
            [
                "multi_remove_portrait",
                [
                    "Lilith",
                    "MC"
                ]
            ],
            [
                "music_fade_back",
                [
                    "1200"
                ]
            ],
            [
                "wait",
                [
                    "1000"
                ]
            ],
            [
                "hide_layer",
                [
                    "bossRoomForm"
                ]
            ],
            [
                "speak",
                [
                    "",
                    "As the necromancer, Lilith, dropped to the ground. The magic she was casted stopped.|The room returned to normal.|Sir Cyrus' body had fallen too, with luminous particles slowly emanating from his body,| dissipating into the room.|Sadly, it seems like...|he would never come back up ever again.",
                    "",
                    "",
                    "narration_top"
                ]
            ],
            [
                "end_skip",
                []
            ],
            [
                "comment",
                [
                    "#setting the endings"
                ]
            ],
            [
                "comment",
                [
                    "#friendless endings"
                ]
            ],
            [
                "if",
                [
                    "game.game_vars['_SenyaControlled'] == True and game.game_vars['_SchuriControlled'] == True"
                ]
            ],
            [
                "if",
                [
                    "is_dead('Senya') and is_dead('Schuri')"
                ]
            ],
            [
                "if",
                [
                    "game.game_vars['_ch3TomeChoice'] == 'Yes'"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "10"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "7"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "elif",
                [
                    "is_dead('Senya')"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "8"
                ]
            ],
            [
                "elif",
                [
                    "is_dead('Schuri')"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "9"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "comment",
                [
                    "#########NEED NEW ENDING HERE"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "7"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "comment",
                [
                    "#senya endings"
                ]
            ],
            [
                "elif",
                [
                    "game.game_vars['_SchuriControlled'] == True"
                ]
            ],
            [
                "if",
                [
                    "is_dead('Schuri')"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "2"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "3"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "comment",
                [
                    "#schuri endings"
                ]
            ],
            [
                "elif",
                [
                    "game.game_vars['_SenyaControlled'] == True"
                ]
            ],
            [
                "if",
                [
                    "is_dead('Senya')"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "5"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "4"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "comment",
                [
                    "#golden ending"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "1"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "win_game",
                []
            ],
            [
                "else",
                []
            ],
            [
                "game_var",
                [
                    "_killLilith",
                    "True"
                ]
            ],
            [
                "remove_unit",
                [
                    "Lilith (Lilith)",
                    "fade"
                ]
            ],
            [
                "resurrect",
                [
                    "Lilith (Lilith)"
                ]
            ],
            [
                "add_unit",
                [
                    "Lilith",
                    "8,4",
                    "swoosh"
                ]
            ],
            [
                "change_music",
                [
                    "player_phase",
                    "finalBossFightClimax"
                ]
            ],
            [
                "change_music",
                [
                    "enemy_phase",
                    "finalBossFightClimax"
                ]
            ],
            [
                "speak",
                [
                    "Lilith",
                    "Argh!!! How dare you!!|You won't be getting away with this!",
                    "",
                    "",
                    "noir"
                ]
            ],
            [
                "speak",
                [
                    "MC",
                    "She must be weak! Time to finish this!"
                ]
            ],
            [
                "end",
                []
            ]
        ],
        "only_once": false,
        "priority": 20,
        "source": "if;game.game_vars['_killLilith'] == True\n    music;deathThroes\n    multi_add_portrait;Lilith;Right;MC;Left\n    speak;Lilith;You... bastard!|I'm so close to reviving...the demon king...|DIE!;;;noir\n    move_portrait;Lilith;MidRight\n    sound;FireBall\n    move_portrait;MC;FarLeft\n    move_portrait;Lilith;Right\n    move_portrait;MC;Left\n    speak;MC;Not today.\n    move_portrait;MC;FarRight\n    sound;Attack Hit 3\n    move_portrait;MC;Left\n    speak;Lilith;How could this be...|Curse you...Uther...;;;noir\n    expression;Lilith;CloseEyes\n    sound;CombatDeath\n    wait;100\n    multi_remove_portrait;Lilith;MC\n    music_fade_back;1200\n    wait;1000\n    hide_layer;bossRoomForm\n    speak;;As the necromancer, Lilith, dropped to the ground. The magic she was casted stopped.|The room returned to normal.|Sir Cyrus' body had fallen too, with luminous particles slowly emanating from his body,| dissipating into the room.|Sadly, it seems like...|he would never come back up ever again.;;;narration_top\n    end_skip\n    #setting the endings\n    #friendless endings\n    if;game.game_vars['_SenyaControlled'] == True and game.game_vars['_SchuriControlled'] == True\n        if;is_dead('Senya') and is_dead('Schuri')\n            if;game.game_vars['_ch3TomeChoice'] == 'Yes'\n                game_var;_gameEnding;10\n            else\n                game_var;_gameEnding;7\n            end\n        elif;is_dead('Senya')\n            game_var;_gameEnding;8\n        elif;is_dead('Schuri')\n            game_var;_gameEnding;9\n        else\n#########NEED NEW ENDING HERE \n            game_var;_gameEnding;7\n        end\n        #senya endings\n    elif;game.game_vars['_SchuriControlled'] == True\n        if;is_dead('Schuri')\n            game_var;_gameEnding;2\n        else\n            game_var;_gameEnding;3\n        end\n        #schuri endings\n    elif;game.game_vars['_SenyaControlled'] == True\n        if;is_dead('Senya')\n            game_var;_gameEnding;5\n        else\n            game_var;_gameEnding;4\n        end\n        #golden ending\n    else\n        game_var;_gameEnding;1\n    end\n    win_game\nelse\n    game_var;_killLilith;True\n    remove_unit;Lilith (Lilith);fade\n    resurrect;Lilith (Lilith)\n    add_unit;Lilith;8,4;swoosh\n    change_music;player_phase;finalBossFightClimax\n    change_music;enemy_phase;finalBossFightClimax\n    speak;Lilith;Argh!!! How dare you!!|You won't be getting away with this!;;;noir\n    speak;MC;She must be weak! Time to finish this!\nend\n"
    }
]