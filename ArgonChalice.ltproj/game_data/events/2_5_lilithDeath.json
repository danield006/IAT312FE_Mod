[
    {
        "name": "lilithDeath",
        "trigger": "unit_death",
        "level_nid": "2_5",
        "condition": "unit.nid == 'Lilith'",
        "commands": [
            [
                "if",
                [
                    "game.game_vars['_killLilith'] == True"
                ]
            ],
            [
                "music",
                [
                    "deathThroes"
                ]
            ],
            [
                "multi_add_portrait",
                [
                    "Lilith",
                    "Right",
                    "MC",
                    "Left"
                ]
            ],
            [
                "speak",
                [
                    "Lilith",
                    "You bastard!!|I'm taking everyone down with me!",
                    "",
                    "",
                    "noir"
                ]
            ],
            [
                "move_portrait",
                [
                    "Lilith",
                    "MidRight"
                ]
            ],
            [
                "sound",
                [
                    "FireBall"
                ]
            ],
            [
                "move_portrait",
                [
                    "MC",
                    "FarLeft"
                ]
            ],
            [
                "move_portrait",
                [
                    "Lilith",
                    "Right"
                ]
            ],
            [
                "move_portrait",
                [
                    "MC",
                    "Left"
                ]
            ],
            [
                "speak",
                [
                    "MC",
                    "It was never yours in the first place."
                ]
            ],
            [
                "move_portrait",
                [
                    "MC",
                    "MidLeft"
                ]
            ],
            [
                "sound",
                [
                    "Attack Hit 3"
                ]
            ],
            [
                "move_portrait",
                [
                    "MC",
                    "Left"
                ]
            ],
            [
                "speak",
                [
                    "Lilith",
                    "How could this be...|You have no idea...|what this chalice can accomplish...|you...|"
                ]
            ],
            [
                "expression",
                [
                    "Lilith",
                    "CloseEyes"
                ]
            ],
            [
                "speak",
                [
                    "Lilith",
                    ".......",
                    "",
                    "",
                    "noir"
                ]
            ],
            [
                "sound",
                [
                    "CombatDeath"
                ]
            ],
            [
                "wait",
                [
                    "100"
                ]
            ],
            [
                "multi_remove_portrait",
                [
                    "Lilith",
                    "MC"
                ]
            ],
            [
                "music_fade_back",
                [
                    "1200"
                ]
            ],
            [
                "wait",
                [
                    "1000"
                ]
            ],
            [
                "remove_group",
                [
                    "initialEnemies"
                ]
            ],
            [
                "remove_group",
                [
                    "summon"
                ]
            ],
            [
                "speak",
                [
                    "",
                    "As the necromancer, Lilith, dropped to the ground. The magic she was casted stopped.|All monsters and reanimated bodies dropped to the floor.|Sir Cyrus' body had fallen too, with luminous particles slowly emanating from his body,| dissipating into the room.|Sadly, it seems like...|he would never come back up ever again.",
                    "",
                    "",
                    "narration_top"
                ]
            ],
            [
                "end_skip",
                []
            ],
            [
                "comment",
                [
                    "#setting the endings"
                ]
            ],
            [
                "comment",
                [
                    "#friendless endings"
                ]
            ],
            [
                "if",
                [
                    "(_SenyaControlled==True) and (_SchuriControlled==True)"
                ]
            ],
            [
                "if",
                [
                    "(game.check_dead('Schuri') and game.check_dead('Senya'))"
                ]
            ],
            [
                "if",
                [
                    "game.game_vars['_ch3TomeChoice'] == 'Yes'"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "10"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "7"
                ]
            ],
            [
                "elif",
                [
                    "(game.check_dead('Senya')"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "8"
                ]
            ],
            [
                "elif",
                [
                    "(game.check_dead('Schuri')"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "9"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "comment",
                [
                    "#senya endings"
                ]
            ],
            [
                "elif",
                [
                    "_SchuriControlled==True"
                ]
            ],
            [
                "if",
                [
                    "game.check_dead('Schuri')"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "2"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "3"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "comment",
                [
                    "#schuri endings"
                ]
            ],
            [
                "elif",
                [
                    "_SenyaControlled==True"
                ]
            ],
            [
                "if",
                [
                    "game.check_dead('Senya')"
                ]
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "5"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "4"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "comment",
                [
                    "#golden ending"
                ]
            ],
            [
                "else",
                []
            ],
            [
                "game_var",
                [
                    "_gameEnding",
                    "1"
                ]
            ],
            [
                "end",
                []
            ],
            [
                "win_game",
                []
            ],
            [
                "else",
                []
            ],
            [
                "game_var",
                [
                    "_killLilith",
                    "True"
                ]
            ],
            [
                "resurrect",
                [
                    "Lilith"
                ]
            ],
            [
                "change_music",
                [
                    "player_phase",
                    "finalBossFightClimax"
                ]
            ],
            [
                "change_music",
                [
                    "enemy_phase",
                    "finalBossFightClimax"
                ]
            ],
            [
                "speak",
                [
                    "Lilith",
                    "Argh!!! How dare you!!|You won't be getting away with this!",
                    "",
                    "",
                    "noir"
                ]
            ],
            [
                "remove_unit",
                [
                    "Lilith"
                ]
            ],
            [
                "transition",
                [
                    "open",
                    "1000",
                    "139,0,0",
                    "",
                    "FLAG(no_block)"
                ]
            ],
            [
                "screen_shake",
                [
                    "800",
                    "",
                    "FLAG(no_block)"
                ]
            ],
            [
                "wait",
                [
                    "500"
                ]
            ],
            [
                "add_group",
                [
                    "summon",
                    "summon",
                    "warp"
                ]
            ],
            [
                "wait",
                [
                    "500"
                ]
            ],
            [
                "speak",
                [
                    "MC",
                    "What?!"
                ]
            ],
            [
                "end",
                []
            ]
        ],
        "only_once": false,
        "priority": 20,
        "source": "if;game.game_vars['_killLilith'] == True\n    music;deathThroes\n    multi_add_portrait;Lilith;Right;MC;Left\n    speak;Lilith;You bastard!!|I'm taking everyone down with me!;;;noir\n    move_portrait;Lilith;MidRight\n    sound;FireBall\n    move_portrait;MC;FarLeft\n    move_portrait;Lilith;Right\n    move_portrait;MC;Left\n    speak;MC;It was never yours in the first place.\n    move_portrait;MC;MidLeft\n    sound;Attack Hit 3\n    move_portrait;MC;Left\n    speak;Lilith;How could this be...|You have no idea...|what this chalice can accomplish...|you...|\n    expression;Lilith;CloseEyes\n    speak;Lilith;.......;;;noir\n    sound;CombatDeath\n    wait;100\n    multi_remove_portrait;Lilith;MC\n    music_fade_back;1200\n    wait;1000\n    remove_group;initialEnemies\n    remove_group;summon\n    speak;;As the necromancer, Lilith, dropped to the ground. The magic she was casted stopped.|All monsters and reanimated bodies dropped to the floor.|Sir Cyrus' body had fallen too, with luminous particles slowly emanating from his body,| dissipating into the room.|Sadly, it seems like...|he would never come back up ever again.;;;narration_top\n    end_skip\n    #setting the endings\n    #friendless endings\n    if;(_SenyaControlled==True) and (_SchuriControlled==True)\n        if;(game.check_dead('Schuri') and game.check_dead('Senya'))\n            if;game.game_vars['_ch3TomeChoice'] == 'Yes'\n                game_var;_gameEnding;10\n            end\n            game_var;_gameEnding;7\n        elif;(game.check_dead('Senya')\n            game_var;_gameEnding;8\n        elif;(game.check_dead('Schuri')\n            game_var;_gameEnding;9\n        end\n        #senya endings\n    elif;_SchuriControlled==True\n        if;game.check_dead('Schuri')\n            game_var;_gameEnding;2\n        else\n            game_var;_gameEnding;3\n        end\n        #schuri endings\n    elif;_SenyaControlled==True\n        if;game.check_dead('Senya')\n            game_var;_gameEnding;5\n        else\n            game_var;_gameEnding;4\n        end\n        #golden ending\n    else\n        game_var;_gameEnding;1\n    end\n    win_game\nelse\n    game_var;_killLilith;True\n    resurrect;Lilith\n    change_music;player_phase;finalBossFightClimax\n    change_music;enemy_phase;finalBossFightClimax\n    speak;Lilith;Argh!!! How dare you!!|You won't be getting away with this!;;;noir\n    remove_unit;Lilith\n    transition;open;1000;139,0,0;;FLAG(no_block)\n    screen_shake;800;;FLAG(no_block)\n    wait;500\n    add_group;summon;summon;warp\n    wait;500\n    speak;MC;What?!\nend\n"
    }
]